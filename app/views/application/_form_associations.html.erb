<% [:belongs_to, :has_one].each do |association| %>
  <% f.object.class.reflect_on_all_associations(association).reject { |value| value.options.has_key?(:through) }.map(&:name).each do |nested_model| %>
    <% unless exclude_associations.find { |e| /#{e}/ =~ nested_model }  %>
      <% if form_attributes_config[nested_model.to_sym] %>
        <%= f.association nested_model, form_attributes_config[nested_model.to_sym] %>
      <% else %>
        <%= f.association nested_model %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
